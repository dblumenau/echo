import{_ as q,t as A,S as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CW_8Ma9s.js";import{d as X,n as G,r as g,w as h,W as M,c as m,o,a as t,b as s,e as i,u as e,m as K,f as u,g as k,h as D,F as T,i as B,t as n,j as O,P as Q,k as R}from"./app-CUGVbddP.js";import{_ as Y,a as Z,b as ee,c as se,d as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-DqrATOtc.js";import{c as te,d as le,_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DhrK_nzI.js";import{_ as re}from"./Input.vue_vue_type_script_setup_true_lang-Bn2mQiMO.js";import{_ as ue,a as oe,b as S,c as f,d as ne,e as p}from"./TableHeader.vue_vue_type_script_setup_true_lang-CNeUDYk2.js";import{_ as de}from"./index-DNNjIN0O.js";import{_ as F,a as N,b as L,c as z,d}from"./SelectValue.vue_vue_type_script_setup_true_lang-Cka63pVs.js";import{u as ie}from"./useFlashMessages-CDU6VOLC.js";import{S as pe,A as V}from"./search-Dh5c--dl.js";import{U as me}from"./user-x-CSJX9ZUC.js";import"./useForwardExpose-DQ7qjBeL.js";import"./RovingFocusGroup-BooSPHZS.js";import"./check-C5U98Myi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=te("UserCheckIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),_e={class:"p-6"},ce={class:"mb-4 flex gap-4"},ve={class:"relative flex-1"},ye={class:"rounded-md border"},ge={key:0,class:"mt-4 flex items-center justify-between"},be={class:"text-sm text-muted-foreground"},$e={class:"flex space-x-2"},Ne=X({__name:"Users",props:{users:{},filters:{}},setup(j){const _=j,E=G();ie();const c=g(_.filters.search||""),v=g(_.filters.user_type||""),b=g(_.filters.sort||"created_at"),y=g(_.filters.direction||"desc"),H=le(r=>{$()},300);h(c,r=>{H(r)}),h(v,()=>{$()});function $(){M.get(route("admin.users.index"),{search:c.value,user_type:v.value,sort:b.value,direction:y.value},{preserveState:!0,preserveScroll:!0})}const w=r=>{b.value===r?y.value=y.value==="asc"?"desc":"asc":(b.value=r,y.value="asc"),$()},I=(r,a)=>{M.patch(route("admin.users.update-approval",r.id),{user_type:a},{preserveScroll:!0,onSuccess:()=>{A.success("User approval status updated successfully!")},onError:()=>{A.error("Failed to update user approval status.")}})},P=r=>{switch(r){case"superadmin":return"default";case"approved":return"secondary";case"unapproved":return"destructive";default:return"secondary"}},C=r=>{switch(r){case"superadmin":return J;case"approved":return fe;case"unapproved":return me;default:return null}},W=[{label:"Admin",href:route("admin.users.index")},{label:"Manage Users"}];return(r,a)=>(o(),m(q,{breadcrumbs:W},{default:t(()=>[s(e(K),{title:"Manage Users"}),i("div",_e,[s(e(Y),null,{default:t(()=>[s(e(Z),null,{default:t(()=>[s(e(ee),null,{default:t(()=>a[5]||(a[5]=[u("User Management")])),_:1}),s(e(se),null,{default:t(()=>a[6]||(a[6]=[u(" Manage user approval status and permissions for the platform. ")])),_:1})]),_:1}),s(e(ae),null,{default:t(()=>[i("div",ce,[i("div",ve,[s(e(pe),{class:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s(e(re),{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=l=>c.value=l),placeholder:"Search by name or email...",class:"pl-8"},null,8,["modelValue"])]),s(e(F),{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l)},{default:t(()=>[s(e(N),{class:"w-[180px]"},{default:t(()=>[s(e(L),{placeholder:"All user types"})]),_:1}),s(e(z),null,{default:t(()=>[s(e(d),{value:""},{default:t(()=>a[7]||(a[7]=[u("All user types")])),_:1}),s(e(d),{value:"unapproved"},{default:t(()=>a[8]||(a[8]=[u("Unapproved")])),_:1}),s(e(d),{value:"approved"},{default:t(()=>a[9]||(a[9]=[u("Approved")])),_:1}),s(e(d),{value:"superadmin"},{default:t(()=>a[10]||(a[10]=[u("Superadmin")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),i("div",ye,[s(e(ue),null,{default:t(()=>[s(e(oe),null,{default:t(()=>[s(e(S),null,{default:t(()=>[s(e(f),null,{default:t(()=>[s(e(x),{variant:"ghost",size:"sm",onClick:a[2]||(a[2]=l=>w("name")),class:"-ml-3 h-8"},{default:t(()=>[a[11]||(a[11]=u(" Name ")),s(e(V),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),s(e(f),null,{default:t(()=>[s(e(x),{variant:"ghost",size:"sm",onClick:a[3]||(a[3]=l=>w("email")),class:"-ml-3 h-8"},{default:t(()=>[a[12]||(a[12]=u(" Email ")),s(e(V),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),s(e(f),null,{default:t(()=>a[13]||(a[13]=[u("Status")])),_:1}),s(e(f),null,{default:t(()=>[s(e(x),{variant:"ghost",size:"sm",onClick:a[4]||(a[4]=l=>w("created_at")),class:"-ml-3 h-8"},{default:t(()=>[a[14]||(a[14]=u(" Date Joined ")),s(e(V),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),s(e(f),null,{default:t(()=>a[15]||(a[15]=[u("Actions")])),_:1})]),_:1})]),_:1}),s(e(ne),null,{default:t(()=>[r.users.data.length?(o(!0),k(T,{key:0},B(r.users.data,l=>(o(),m(e(S),{key:l.id},{default:t(()=>[s(e(p),{class:"font-medium"},{default:t(()=>[u(n(l.name),1)]),_:2},1024),s(e(p),null,{default:t(()=>[u(n(l.email),1)]),_:2},1024),s(e(p),null,{default:t(()=>[s(e(de),{variant:P(l.user_type),class:"flex items-center gap-1 w-fit"},{default:t(()=>[C(l.user_type)?(o(),m(O(C(l.user_type)),{key:0,class:"h-3 w-3"})):D("",!0),u(" "+n(l.user_type),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(p),{class:"text-sm text-muted-foreground"},{default:t(()=>[u(n(new Date(l.created_at).toLocaleDateString()),1)]),_:2},1024),s(e(p),null,{default:t(()=>[s(e(F),{"model-value":l.user_type,"onUpdate:modelValue":U=>I(l,U),disabled:l.id===e(E).props.auth.user.id},{default:t(()=>[s(e(N),{class:"w-[140px]"},{default:t(()=>[s(e(L))]),_:1}),s(e(z),null,{default:t(()=>[s(e(d),{value:"unapproved"},{default:t(()=>a[16]||(a[16]=[u("Unapproved")])),_:1}),s(e(d),{value:"approved"},{default:t(()=>a[17]||(a[17]=[u("Approved")])),_:1}),s(e(d),{value:"superadmin"},{default:t(()=>a[18]||(a[18]=[u("Superadmin")])),_:1})]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024))),128)):(o(),m(e(S),{key:1},{default:t(()=>[s(e(p),{colspan:"5",class:"h-24 text-center"},{default:t(()=>a[19]||(a[19]=[u(" No users found. ")])),_:1})]),_:1}))]),_:1})]),_:1})]),r.users.last_page>1?(o(),k("div",ge,[i("div",be," Showing "+n(r.users.from)+" to "+n(r.users.to)+" of "+n(r.users.total)+" results ",1),i("div",$e,[(o(!0),k(T,null,B(r.users.links,(l,U)=>(o(),m(e(Q),{key:U,href:l.url,class:R(["px-3 py-1 text-sm rounded-md",l.active?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80",!l.url&&"opacity-50 cursor-not-allowed"]),innerHTML:l.label,disabled:!l.url,"preserve-scroll":""},null,8,["href","class","innerHTML","disabled"]))),128))])])):D("",!0)]),_:1})]),_:1})])]),_:1}))}});export{Ne as default};
